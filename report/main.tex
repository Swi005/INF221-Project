\documentclass{article}
\usepackage{graphicx} % Required for inserting images
\usepackage{tikz}
\usepackage{tikz-cd}
\usepackage{listings}

\title{Parser Generators are Hard}
\author{Sander Wiig}
\date{\today}

\begin{document}

\maketitle

\tableofcontents

\section{Proof of man's Hubris}
\subsection{How we got here}
I believe it was Mark Twain who once said, "\textit{Challenges make life interesting}"; by that standard, my life has been very interesting.\\

The project's original goal was to create a metalanguage for defining other languages.
The plan was to have an underlying semantics and then to let the user define a syntax and give bindings between that syntax and the underlying semantics.
It turns out that this is somewhat difficult to achieve.\\
Therefore, the project goal was scaled back to just a parser generator that outputs a parser that can parse a CFG grammar and an AST for said grammar.\\

It turns out this also presents some challenges. An AST is very much just a parse tree but with all the superfluous information, such as parenthesis, semicolons, and other non-relevant information, removed so that all that remains is the information necessary to preserve the semantics and structure of the program. The problem then becomes, What information is relevant? Because of this, it was decided instead to output a parse tree rather than an AST.


\subsection{The Parser Generator}
The parser generator works by first parsing a \texttt{.ebnf} file. The \texttt{.ebnf} file contains a CFG grammar that is defined in a format inspired by EBNF.
The EBNF parser outputs a AST representation of the grammar that is then fed to the code generator.

\begin{figure}[!h]
    \centering
    \fbox{
        \centering
        \begin{tikzcd}
                \parbox{\textwidth}{}\arrow[d, "\text{grammar.ebnf}"]\\
                \fbox{\parbox{10em}{\centering EBNF Parser}}\arrow[d, ""]\\
                \fbox{\parbox{10em}{\centering EBNF AST}}\arrow[d, ""]\\Â¨\fbox{\parbox{10em}{\centering Code Generator}}\arrow[d, "\text{Parser Code}"]\\
                \parbox{\textwidth}{}
        \end{tikzcd}
    }
    \caption{The Parser Generator Process}
    \label{fig:process}
\end{figure}

\subsection{Program internals}
The library consists of two sub-libraries,
    \begin{itemize}
        \item \textbf{EBNF} - The \texttt{EBNF} library is responsible for parsing the user-defined grammar and creating an AST for it.
        \item \textbf{Generator} - The \texttt{Generator} takes an AST generated by the \texttt{EBNF} library and generates a Megaparsec parser that can parse a user-defined grammar. 
    \end{itemize}

\subsubsection*{EBNF}
The \texttt{EBNF} library consists of the following files
\begin{itemize}
    \item \texttt{EBNF.hs} - defines the AST for a grammar.
    \item \texttt{E}
\end{itemize}

\section{Does it work?}
\subsection{"There are 56 consecutive parentheses"}
    
\subsection{Why it doesn't work}
\subsection{How to make it work}

\section{How to Use it}
    

    
\end{document}
